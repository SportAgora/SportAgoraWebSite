<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informações sobre o Evento</title>
    <link rel="stylesheet" href="/css/infoevento.css">
    <script src="js/ingressos-evento.js"></script>
    <link rel="stylesheet" href="/css/evento.css">
    <link rel="icon" href="imagens/SportAgora.png">
</head>
<body>
    <%- include('../partials/navbar'); %>

 <main class="aba-evento">
    <section class="aba-evento">
        <article class="container-ver-eventos">
            <button class="botao-seta" onclick="window.history.back()">
                <img src="/imagens/left-arrow.png" alt="Seta"> </button>
            <span class="ver-eventos">Ver todos os eventos</span>
        </article>

    <article class="banner-evento">
        <img src="<%= evento.evento_foto %>" alt="Banner do evento">
    </article>

    <section class="info-container">
        <section class="box-esquerda">
            <%-evento.evento_descricao%>
        </section>

        <section class="box-direita">
            <article class="evento-status gratis">tags</article>
            <h2 class="nome-evento"><%=evento.evento_nome%></h2>
            <hr class="linha-separadora">
            <%
            let data = new Date(evento.evento_data_hora);
            let dia = String(data.getDate()).padStart(2, '0');
            let mes = String(data.getMonth() + 1).padStart(2, '0'); 
            let ano = data.getFullYear();
            let dataFormatada = `${dia}/${mes}/${ano}`; 

            let datainscricao = new Date(evento.evento_data_fim);
            let diainscricao = String(data.getDate()).padStart(2, '0');
            let mesinscricao = String(data.getMonth() + 1).padStart(2, '0'); 
            let anoinscricao = data.getFullYear();
            let dataFormatadainscricao = `${dia}/${mes}/${ano}`; 
            let horainscricao = String(data.getHours()).padStart(2, '0');
            let minutosinscricao = String(data.getMinutes()).padStart(2, '0');
            let horaMinutoinscricao = `${horainscricao}:${minutosinscricao}`;
            %>
            <section class="detalhes-evento">
                <article class="data-evento">
                    <img src="/imagens/calendario.png" alt="Calendário">
                    <span><%=dataFormatada%></span>
                </article>
                <article class="local-evento">
                    <img src="/imagens/local.png" alt="Local">
                    <span><%=evento.logradouro%>, <%=evento.cidade%>, <%=evento.estado%></span>
                </article>
            </section>
            <hr class="linha-separadora">
            <p class="data-limite">Inscrições até: <%=dataFormatadainscricao%> <%=horaMinutoinscricao%> ou até o limite de vagas.</p>
            <section class="ingressos-container">
  <section class="ingressos">
  <% if (evento.ingressos && evento.ingressos.length > 0) { %>
    <% evento.ingressos.forEach(ingresso => { %>
      <section class="ingresso-linha">
        <section class="info-ingresso">
          <p class="nome-ingresso"><%= ingresso.ingresso_nome %></p>
          <p class="tipo-ingresso">Inteira</p>
        </section>
        <section class="preco-ingresso">R$ <%= ingresso.ingresso_valor %></section>
        <section class="controle-quantidade">
          <button class="botao-controle" onclick="alterarQuantidade('<%= ingresso.ingresso_id %>_inteira', -1)">-</button>
          <span id="quantidade-<%= ingresso.ingresso_id %>_inteira">0</span>
          <button class="botao-controle" onclick="alterarQuantidade('<%= ingresso.ingresso_id %>_inteira', 1)">+</button>
        </section>
      </section>

      <hr class="linha-separadora-ingresso">
      <% if (ingresso.ingresso_meia) { %>
        <section class="ingresso-linha">
          <section class="info-ingresso">
            <p class="nome-ingresso"><%= ingresso.ingresso_nome %></p>
            <p class="tipo-ingresso">Meia</p>
          </section>
          <section class="preco-ingresso">R$ <%= (ingresso.ingresso_valor / 2) %></section>
          <section class="controle-quantidade">
            <button class="botao-controle" onclick="alterarQuantidade('<%= ingresso.ingresso_id %>_meia', -1)">-</button>
            <span id="quantidade-<%= ingresso.ingresso_id %>_meia">0</span>
            <button class="botao-controle" onclick="alterarQuantidade('<%= ingresso.ingresso_id %>_meia', 1)">+</button>
          </section>
        </section>
        <hr class="linha-separadora-ingresso">
      <% } %>
    <% }) %>
  <% } else { %>
    <p>Nenhum ingresso disponível para este evento.</p>
  <% } %>
</section>

  <section class="total-ingressos">
    Total: <span id="valor-total">R$ 00,00</span>
  </section>
</section>

            <article class="botoes-inscricao">
                <button class="btn-fale-conosco">Fale conosco</button>
                <button class="btn-inscrever-se" onclick="location.href='/pagamento-evento'">Inscrever-se</button>
            </article>
        </section>
    </section>
</section>
    
    <section class="relacionado-eventos">
        <article class="relacionado-evento">
            <a href="/infoevento2" class="invisible-button1"></a>
            <img src="/imagens/bannerevento2.png" alt="Evento 1">
            <p><strong>Nome do Evento 2 </strong></p>
            <p><strong>Data do Evento 2 </strong></p>
            <p><strong>Data do Evento 2 </strong> </p>
        </article>
        <article class="relacionado-evento">
            <a href="/infoevento2" class="invisible-button1"></a>
            <img src="/imagens/bannerevento2.png" alt="Evento 2">
            <p><strong>Nome do Evento 2 </strong></p>
            <p><strong>Data do Evento 2 </strong></p>
            <p><strong>Data do Evento 2 </strong> </p>
        </article>
    </section>
</main>


<!-- responsividade da box direita -->

<section class="mobile-fixed-bottom-bar">
    <p>Inscrições até: 20/08/2024 23:59 ou até o limite de vagas.</p>
    <button class="inscrever-btn" onclick="location.href='/inscrito'">Inscrever-se</button>
  </section>

<%- include('../partials/footer'); %>
</body>
</html>
